<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>ç´…ç‹å¾Œå°ç®¡ç†</title>
  <link rel="stylesheet" href="/public/styles/style.css" />
</head>
<body>
  <h1>ğŸ”§ å¾Œå°ç®¡ç†</h1>

  <!-- ç™»å…¥å€ -->
  <input type="password" id="adminPass" placeholder="è¼¸å…¥å¯†ç¢¼" />
  <button onclick="login()">ç™»å…¥</button>

  <!-- å¾Œå°å…§å®¹ -->
  <div id="adminPanel" class="hidden">
   

    <h2>ğŸ çå“å‰©é¤˜æ•¸é‡</h2>
    <ul id="prizeList"></ul>

    <p id="totalRemaining" style="font-weight: bold; font-size: 1.1rem;">
  â³ å‰©é¤˜ç¸½æŠ½æ•¸ï¼š<span id="remainingCount">è¼‰å…¥ä¸­...</span>
      <h2>ğŸ« åŠ å€¼æŠ½çåˆ¸</h2>
<input type="text" id="adminName" placeholder="è¼¸å…¥é¡§å®¢å§“å" />
<input type="number" id="ticketCount" placeholder="åŠ å€¼åˆ¸æ•¸" />
<button onclick="addTickets()">æ–°å¢æŠ½çåˆ¸</button>

    
    <h2>ğŸ« ä½¿ç”¨è€…åˆ¸æ•¸ç¸½è¦½</h2>
<table>
  <thead>
    <tr><th>å§“å</th><th>å‰©é¤˜åˆ¸æ•¸</th><th>æ“ä½œ</th></tr>
  </thead>
  <tbody id="userTable"></tbody>
</table>

<script>
function addTickets() {
  const name = document.getElementById("adminName").value.trim();
  const count = parseInt(document.getElementById("ticketCount").value);

  if (!name || isNaN(count) || count <= 0) {
    alert("è«‹è¼¸å…¥æœ‰æ•ˆçš„å§“åèˆ‡åˆ¸æ•¸");
    return;
  }

  fetch("/api/addTickets", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ name, count })
  })
    .then(res => res.json())
    .then(data => {
      alert(data.message);
    })
    .catch(err => {
      console.error("åŠ å€¼å¤±æ•—", err);
      alert("åŠ å€¼å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦");
    });
}
</script>

    </p>
 <button onclick="resetPrizes()">ğŸ”„ é‡ç½®çæ± </button>
    <h2>ğŸ“œ æŠ½çç´€éŒ„</h2>
    <button onclick="exportCSV()">åŒ¯å‡º CSV</button>
    <ul id="recordList"></ul>
  </div>

  <script src="/public/scripts/admin.js"></script>
</body>
</html>
